from flask import Flask, request, render_template_string
import sqlite3
import subprocess

app = Flask(__name__)

@app.route("/login")
def login():
    user = request.args.get("user")
    conn = sqlite3.connect("db.sqlite")
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM users WHERE username = ?", (user,))
    return "Login OK"

@app.route("/ping")
def ping():
    ip = request.args.get("ip")
    subprocess.run(["ping", ip], check=False)
    return "Ping sent"

@app.route("/hello")
def hello():
    name = request.args.get("name")
    template = "<h1>Hello {{ name }}</h1>"
    return render_template_string(template, name=name)

if __name__ == "__main__":
    app.run(debug=False)